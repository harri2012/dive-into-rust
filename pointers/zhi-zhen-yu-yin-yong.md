# 指针与引用

指针通常是指指向某一内存地址的变量，这个内存地址是保存数据的起始地址。引用基于指针的思想来实现，功能也类似于指针，但是不支持指针运算。

## 指针

Rust保留了指针的使用，在Rust语言环境下将其称为原始指针\(Raw Pointer\)。指针总是一个记录数据内存地址的变量。Rust提供了两种指针，`*const T` 和`*mut T`，分别对应于C语言中的`const T*` 和 `T*`。Raw指针的一个用途是通过`FFI`与C语言库交互，另外Raw指针也用来实现集合类型、智能指针以及自定义内存分配和回收。

1. 不保证Raw指针总是指向有效地址，也不保证指向非空地址（`Box`和`&`拥有这些保证）
2. 不会自动释放Raw指针指向的内存（`Box`等智能指针在离开作用域时会自动释放内存）
3. 对指向的数据不拥有所有权，不能保证指向地址的内存不被提前释放
4. 解引用指针是一个非安全（`unsafe`）的操作，应尽量避免直接使用指针
5. 指针类型反实现了（opt-out）`Send`和`Sync` 特质，不是线程安全的

#### Thin指针与Fat指针

一个指向\`Size\`（占用内存大小在编译期可确定）类型的指针，只需要记录数据内存起始地址即可，这种指针称为**Thin指针**。如果指向`Unsize`类型的指针，如指向数组切片\[T\]、字符串str，以及包含`Unsize`类型结构体等类型的指针，除了记录内存起始地址，还需要记录数据长度信息，对于数组切片和字符串需要记录元素长度，对于`Unsize`类型结构体则需要记录结构体实例的字节长度。

### 指针运算



### 指针类型转换

